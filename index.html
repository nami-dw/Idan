<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üéÅ Ada sesuatu buat kamu</title>
<style>
  :root{
    --txt:#eaf6ff; --muted:#cfe8ff; --btn:#38bdf8;
  }

  /* ===== Aurora biru-ungu dinamis (anti solid) ===== */
  html,body{height:100%}
  body{
    margin:0; padding:0 12px; overflow-x:hidden;
    font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Noto Sans,Ubuntu,Cantarell,"Helvetica Neue",Arial;
    color:var(--txt); text-align:center;
    /* tiga blob radial + canvas navy di bawah */
    background:
      radial-gradient(60vmax 60vmax at 20% 30%, #1e3a8acc, transparent 60%),
      radial-gradient(60vmax 60vmax at 80% 20%, #2563ebcc, transparent 60%),
      radial-gradient(60vmax 60vmax at 50% 80%, #4f46e5cc, transparent 60%),
      #0a1022;
    background-size:200% 200%;
    animation:auroraMove 16s ease-in-out infinite;
  }
  @keyframes auroraMove {
    0%   {background-position: 0% 50%;}
    50%  {background-position: 100% 50%;}
    100% {background-position: 0% 50%;}
  }
  /* grain tipis biar halus */
  body::after{
    content:""; position:fixed; inset:-1px; z-index:-1; pointer-events:none;
    background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAPUlEQVR42u3PMQEAIAzAsJv/0yQm2gTzq2kE2v0Hh9kBAAAAAAAAAIC3xk2m73kq4c8g1d6f2Lw8Y2g0Gg0AAAAA4A9q1w2f7y7iAAPzv2sAAAAASUVORK5CYII=");
    opacity:.06; mix-blend-mode:soft-light; image-rendering:pixelated;
  }

  h1#headline{margin:22px 0 8px;font-size:clamp(22px,6.5vw,44px);text-shadow:0 2px 10px rgba(0,0,0,.7)}
  #message{margin:6px 0 10px;font-size:clamp(14px,4.2vw,20px);color:var(--muted);text-shadow:0 1px 4px rgba(0,0,0,.6)}

  .btn{
    background:linear-gradient(180deg,#38bdf8,#17a5e0);
    color:#06131b;font-weight:800;border:none;border-radius:14px;
    padding:14px 20px;margin:14px auto 10px;cursor:pointer;
    font-size:clamp(15px,4.4vw,18px);
    display:inline-block;box-shadow:0 10px 28px rgba(56,189,248,.35), inset 0 -2px 0 #0e7fae
  }
  .btn:active{transform:translateY(1px)} .btn:disabled{opacity:.65;cursor:not-allowed}

  /* 2 foto per slide */
  .gallery{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin:16px auto 22px;max-width:720px}
  .gallery img{
    width:100%;border-radius:14px;display:block;opacity:0;transform:scale(.96);
    transition:opacity .45s ease,transform .45s ease,filter .3s;box-shadow:0 10px 24px rgba(0,0,0,.35)
  }
  .gallery img.show{opacity:1;transform:scale(1)}
  .gallery img:hover{filter:brightness(1.07)}
  footer{margin:18px 0 26px;color:#d6eaff;font-size:clamp(12px,3.5vw,14px);text-shadow:0 1px 4px rgba(0,0,0,.6)}

  /* Kontrol musik */
  .pill{position:fixed;bottom:12px;right:12px;background:rgba(5,31,53,.9);
    padding:8px 12px;border-radius:999px;border:1px solid #0b3356;
    display:flex;gap:8px;align-items:center;backdrop-filter:blur(3px)}
  .pill span{font-size:clamp(12px,3.5vw,14px);color:#cfe8ff}
  .pill button{background:#22d3ee;border:1px solid #0e7490;color:#00242b;padding:6px 10px;border-radius:999px;font-weight:700}
  .pill button.pause{background:#fca5a5;border-color:#b91c1c;color:#2b0000}
  .pill[hidden]{display:none}

  /* Finale headline glow */
  .glow{font-size:clamp(22px,7vw,40px);color:#eaf6ff;text-shadow:
    0 0 10px #7dd3fc, 0 0 24px #60a5fa, 0 0 36px #818cf8; animation:pulse 1.6s infinite alternate}
  @keyframes pulse{from{transform:scale(1)}to{transform:scale(1.08)}}

  /* Balon afterparty */
  .balloon{position:fixed;bottom:-60px;font-size:28px;animation:rise linear forwards;pointer-events:none;
    filter:drop-shadow(0 4px 10px rgba(0,0,0,.35))}
  @keyframes rise{to{transform:translateY(-120vh) rotate(-8deg);opacity:.9}}
</style>
</head>
<body>
  <!-- Teaser (no spoiler) -->
  <h1 id="headline">Psst‚Ä¶ ada sesuatu buat kamu üòâ</h1>
  <p id="message">Tap tombol di bawah untuk mulai</p>

  <button id="surpriseBtn" class="btn">‚ú® Buka</button>

  <!-- 2 foto per slide -->
  <div class="gallery">
    <img id="img1" alt="Foto 1" loading="lazy">
    <img id="img2" alt="Foto 2" loading="lazy">
  </div>

  <footer>Dari aku, untukmu üíô</footer>

  <!-- Kontrol musik -->
  <div class="pill" id="musicPill" hidden>
    <span id="musicText">üé∂ Musik diputar‚Ä¶</span>
    <button id="musicToggle" class="pause">‚è∏Ô∏è Pause</button>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <script>
    /* ===== KONTEN =====
       Foto Google Drive:
       - Share: Anyone with the link (Viewer)
       - Format: https://drive.google.com/uc?export=view&id=FILE_ID&sz=w900
    */
    const slides = [
  { 
    text:"üíô Waktu kita jalan bareng",
    photos:[
      "./images/foto1.jpg",
      "./images/foto2.jpg"
    ]
  },
  { 
    text:"üå∏ Senyum kamu paling manis",
    photos:[
      "./images/foto3.jpg",
      "./images/foto4.jpg"
    ]
  },
  { 
    text:"‚ú® Semoga bahagia selalu",
    photos:[
      "./images/foto5.jpg",
      "./images/foto6.jpg"
    ]
  }
];

    const SONG_SRC = "lagu.mp3"; // unggah/ganti dengan lagumu

    /* ===== STATE ===== */
    let idx = 0, afterpartyStarted = false;
    const btn = document.getElementById("surpriseBtn");
    const msg = document.getElementById("message");
    const headline = document.getElementById("headline");
    const img1 = document.getElementById("img1");
    const img2 = document.getElementById("img2");
    const musicPill = document.getElementById("musicPill");
    const musicText = document.getElementById("musicText");
    const musicToggle = document.getElementById("musicToggle");
    let audio, isPlaying = false;

    // Preload foto
    slides.flatMap(s=>s.photos).forEach(src=>{const im=new Image(); im.src=src;});

    /* ===== Confetti: cepat, jatuh, variatif biru ===== */
    const palettes = [
      ["#38bdf8","#60a5fa","#818cf8","#a5b4fc"],
      ["#22d3ee","#38bdf8","#0ea5e9","#0284c7"],
      ["#7dd3fc","#93c5fd","#c7d2fe","#e0e7ff"],
      ["#60a5fa","#fbbf24","#f59e0b","#38bdf8"]
    ];
    function burstVariant(){
  const colors  = palettes[Math.floor(Math.random()*palettes.length)];
  const scalar  = 1.4 + Math.random()*0.6;   // ukuran lebih besar
  const gravity = 1.1, decay=0.82, ticks=120;
  const vel     = 65 + Math.random()*20;     // lebih cepat
  const drift   = (Math.random()*1.2 - 0.6);

  // ledakan utama
  confetti({particleCount:220, startVelocity:vel, spread:80, origin:{y:0.6}, colors, scalar, gravity, decay, ticks, drift});
  confetti({particleCount:150, startVelocity:vel, angle:60, spread:65, origin:{x:0.06,y:0.7}, colors, scalar, gravity, decay, ticks, drift});
  confetti({particleCount:150, startVelocity:vel, angle:120, spread:65, origin:{x:0.94,y:0.7}, colors, scalar, gravity, decay, ticks, drift});

  // hujan tambahan
  const end = Date.now() + 800;
  const rain = setInterval(() => {
    confetti({
      particleCount: 25,
      startVelocity: 55,
      gravity: 1.3,
      decay: 0.82,
      ticks: 100,
      scalar: 1.2,
      spread: 50,
      origin: { x: Math.random(), y: -0.1 },
      colors
    });
    if (Date.now() > end) clearInterval(rain);
  }, 80);
    }
    
    /* ===== Foto: cache-buster biar pasti berubah di HP ===== */
    function withVersion(url, v){
      try{ const u = new URL(url, location.href); u.searchParams.set('v', v); return u.toString(); }
      catch(e){ return url + (url.includes('?')?'&':'?') + 'v=' + v; }
    }
    function showSlide(i){
      const s = slides[i];
      msg.textContent = s.text;
      img1.classList.remove("show"); img2.classList.remove("show");
      img1.src = ""; img2.src = "";
      setTimeout(()=>{
        img1.src = withVersion(s.photos[0], i);
        img2.src = withVersion(s.photos[1], i);
        requestAnimationFrame(()=>{ img1.classList.add("show"); img2.classList.add("show"); });
      },20);
    }

    /* ===== Musik: auto-start pada interaksi pertama + kontrol ===== */
    function ensureAudio(){
      if(!audio){ audio = new Audio(SONG_SRC); audio.loop = true; }
      if(!isPlaying){
        audio.play().then(()=>{
          isPlaying = true; musicPill.hidden = false;
          musicText.textContent = "üé∂ Musik diputar‚Ä¶";
          musicToggle.textContent = "‚è∏Ô∏è Pause"; musicToggle.classList.add("pause");
        }).catch(()=>{
          musicPill.hidden = false; isPlaying = false;
          musicText.textContent = "üîà Ketuk untuk mulai musik";
          musicToggle.textContent = "‚ñ∂Ô∏è Play"; musicToggle.classList.remove("pause");
        });
      }
    }
    function toggleAudio(){
      if(!audio){ ensureAudio(); return; }
      if(isPlaying){
        audio.pause(); isPlaying = false;
        musicText.textContent = "üîá Musik dijeda";
        musicToggle.textContent = "‚ñ∂Ô∏è Play"; musicToggle.classList.remove("pause");
      }else{
        audio.play(); isPlaying = true;
        musicText.textContent = "üé∂ Musik diputar‚Ä¶";
        musicToggle.textContent = "‚è∏Ô∏è Pause"; musicToggle.classList.add("pause");
      }
    }
    musicToggle.addEventListener("click", toggleAudio);
    const startOnFirstInteraction = () => { ensureAudio(); window.removeEventListener('touchstart', startOnFirstInteraction); window.removeEventListener('click', startOnFirstInteraction); };
    window.addEventListener('touchstart', startOnFirstInteraction, {once:false});
    window.addEventListener('click', startOnFirstInteraction, {once:false});

    /* ===== Afterparty ===== */
    function spawnBalloon(){
      const b = document.createElement("div");
      b.className = "balloon";
      b.style.left = (5 + Math.random()*90) + "vw";
      b.style.animationDuration = (6 + Math.random()*5) + "s";
      b.textContent = ["üéà","üíô","üíé","üåü"][Math.floor(Math.random()*4)];
      document.body.appendChild(b);
      setTimeout(()=>b.remove(), 12000);
    }
    function startAfterparty(){
      if(afterpartyStarted) return;
      afterpartyStarted = true;
      setInterval(()=>confetti({
        particleCount: 36, spread: 55, origin:{y:0.88},
        colors: palettes[Math.floor(Math.random()*palettes.length)],
        gravity: 1.15, decay: 0.86, ticks: 130
      }), 5200);
      setInterval(spawnBalloon, 1400);
    }

    /* ===== Klik tombol ===== */
    btn.addEventListener("click", () => {
      for(let k=0;k<4;k++) setTimeout(burstVariant, k*140);

      if(idx === 0){ headline.textContent = "Untukmu üíô"; }
      if(idx < slides.length){ showSlide(idx); idx++; }

      if(idx >= slides.length){
        btn.disabled = true; btn.textContent = "‚ú® Selesai";
        setTimeout(()=>{
          burstVariant();
          headline.innerHTML = "<span class='glow'>üéâ HAPPY BIRTHDAY üéâ</span>";
          startAfterparty();
        }, 600);
      }
    });
  </script>
</body>
</html>
