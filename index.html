<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üéÅ Ada sesuatu buat kamu</title>
<style>
  :root{ --txt:#eaf6ff; --muted:#cfe8ff;
    --base:#050517; --c1:rgba(129,140,248,.3); --c2:rgba(59,130,246,.28); --c3:rgba(67,56,202,.28); --c4:rgba(99,102,241,.26);
  }

  html,body{height:100%}
  body{
    margin:0; padding:0 12px; overflow-x:hidden;
    font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Noto Sans,Ubuntu,Cantarell,"Helvetica Neue",Arial;
    color:var(--txt); text-align:center;
    background: radial-gradient(circle at center,var(--base) 40%,#000 100%);
    overflow:auto; /* biar bisa digulir saat teks panjang */
    padding-bottom:84px; /* ruang UI bawah */
  }

  /* Aurora */
  body::before, body::after{
    content:""; position:fixed; inset:0; z-index:-2;
    background: conic-gradient(from 180deg at 50% 50%,
      var(--c1) 0deg, var(--c2) 90deg, var(--c3) 180deg, var(--c4) 270deg, transparent 360deg);
    filter:blur(120px);
    animation: auroraShift 40s linear infinite alternate;
    opacity:1; transition: opacity .35s ease;
  }
  body::after{
    background: conic-gradient(from 90deg at 60% 60%,
      var(--c2) 0deg, var(--c3) 120deg, var(--c4) 240deg, transparent 360deg);
    animation-duration:55s;
  }
  @keyframes auroraShift {
    0%{transform:translateY(0) translateX(0)}
    50%{transform:translateY(-8%) translateX(6%)}
    100%{transform:translateY(6%) translateX(-6%)}
  }

  /* Bintang */
  .stars{position:fixed; inset:0; z-index:-1;
    background-image:
      radial-gradient(2px 2px at 20% 30%, #fff, transparent),
      radial-gradient(1.5px 1.5px at 70% 40%, #fff, transparent),
      radial-gradient(2px 2px at 40% 80%, #fff, transparent),
      radial-gradient(1px 1px at 80% 70%, #fff, transparent),
      radial-gradient(1.2px 1.2px at 30% 60%, #fff, transparent);
    background-repeat:no-repeat; animation:twinkle 6s ease-in-out infinite alternate; pointer-events:none;}
  @keyframes twinkle { from{opacity:0.6} to{opacity:1} }

  h1#headline{margin:22px 0 8px;font-size:clamp(22px,6.5vw,44px);min-height:1.2em}

  /* Pesan default dipakai untuk teaser ‚Üí rata tengah */
  #message{margin:6px 0 10px;font-size:clamp(14px,4.2vw,20px);color:var(--muted);min-height:1.5em}

  /* >>> Tambahan khusus slide supaya rapi (hanya aktif saat ada class .story) */
  #message.story{
    max-width:680px;
    margin: 12px auto 10px;
    text-align:justify;
    line-height:1.7;
    white-space:pre-line; /* hormati \n jadi paragraf */
  }

  .btn{
    background:linear-gradient(180deg,#38bdf8,#0ea5e9);
    color:#031018;font-weight:800;border:none;border-radius:14px;
    padding:14px 20px;margin:14px auto 10px;cursor:pointer;
    font-size:clamp(15px,4.4vw,18px);
    display:inline-block;box-shadow:0 10px 28px rgba(56,189,248,.35);
    position:relative; z-index:10; pointer-events:auto;
  }
  .btn:disabled{opacity:.7}

  /* Spasi aman biar gak nabrak pill musik di slide 1‚Äì2 */
  .btn.space-bottom{ margin-bottom:120px; }

  .center-teaser #headline,
  .center-teaser #message,
  .center-teaser #surpriseBtn{ transform:translateY(32vh); }

  .bottom-fixed{ position:fixed; left:50%; transform:translateX(-50%);
    bottom:92px; z-index:6; }

  /* Galeri */
  .gallery{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin:16px auto 22px;max-width:720px}
  .gallery img{width:100%;border-radius:14px;display:block;opacity:0;transform:scale(.96);
    transition:opacity .45s ease,transform .45s ease;box-shadow:0 10px 24px rgba(0,0,0,.35)}
  .gallery img.show{opacity:1;transform:scale(1)}
  .gallery[hidden]{display:none}

  footer{margin:18px 0 10px;color:#d6eaff;font-size:clamp(12px,3.5vw,14px)}

  /* Musik */
  .pill{position:fixed;bottom:12px;right:12px;background:rgba(5,31,53,.85);
    padding:8px 12px;border-radius:999px;display:flex;gap:8px;align-items:center}
  .pill span{font-size:clamp(12px,3.5vw,14px);color:#cfe8ff}
  .pill button{background:#22d3ee;border:none;color:#00242b;padding:6px 10px;border-radius:999px;font-weight:700}
  .pill button.pause{background:#fca5a5;color:#2b0000}
  .pill[hidden]{display:none}

  /* Finale */
  .type{font-weight:900; letter-spacing:.06em; font-size:clamp(26px,8vw,54px);
    margin-top:8px; min-height:1.2em; position:relative;}
  .type::after{content:"|"; margin-left:4px; animation:blink 1s steps(2,start) infinite; opacity:.9;}
  @keyframes blink{0%,49%{opacity:1} 50%,100%{opacity:0}}
  .type.done::after{animation:none; opacity:0; transition:opacity .25s}
  .name{ font-size:clamp(18px,5.5vw,28px); margin-top:6px; color:#e5f2ff; opacity:.95 }
  .sparkle{ position:fixed; font-size:16px; pointer-events:none; filter:drop-shadow(0 2px 8px rgba(255,255,255,.6)); animation: floatUp 1400ms ease-out forwards; }
  @keyframes floatUp{ from{transform:translateY(8px) scale(.9); opacity:0} 30%{opacity:1} to{transform:translateY(-36px) scale(1.1); opacity:0} }
  .rise{ position:fixed; bottom:-40px; font-size:28px; pointer-events:none; animation: riseUp linear forwards; filter:drop-shadow(0 4px 10px rgba(0,0,0,.35)); }
  @keyframes riseUp{ to{ transform:translateY(-120vh) rotate(-8deg); opacity:.9 } }
  .finale-img{ margin-top:12px; max-width:90%; border-radius:16px; box-shadow:0 10px 28px rgba(0,0,0,.45); opacity:0; transform:translateY(6px); transition:opacity .5s ease, transform .5s ease; }
  .finale-img.show{ opacity:1; transform:translateY(0) }

  #ornaments{ position:absolute; inset:0; z-index:0; pointer-events:none; }
  .orn{ position:absolute; font-size:clamp(18px,5vw,30px); opacity:.18;
    filter:drop-shadow(0 0 6px rgba(255,255,255,.18));
    transform:translate(-50%,-50%);
    animation: drift var(--dur,12s) ease-in-out infinite alternate;
    will-change: transform; }
  @keyframes drift{
    from{ transform:translate(calc(-50% + var(--dx,0px)), calc(-50% + var(--dy,0px))) rotate(0deg); }
    to{   transform:translate(calc(-50% + var(--dx,6px)),  calc(-50% + var(--dy,-10px))) rotate(6deg); }
  }

  .hb-shadow{
    text-shadow: 0 1px 0 rgba(255,255,255,.35),
                 0 10px 28px rgba(0,0,0,.35),
                 0 2px 12px rgba(56,189,248,.22);
  }
  /* Efek glowing khusus untuk HAPPY BIRTHDAY */
.glow {
  animation: glowPulse 3.5s ease-in-out infinite alternate;
}

@keyframes glowPulse {
  from {
    text-shadow: 
      0 0 1px #fff,
      0 0 4px rgba(56,189,248,0.6),
      0 0 6px rgba(14,165,233,0.5);
  }
  to {
    text-shadow: 
      0 0 2px #fff,
      0 0 8px rgba(56,189,248,0.7),
      0 0 12px rgba(14,165,233,0.6);
  }
}
/* Glow kuning untuk Nama */
.name-glow {
  animation: nameGlow 2.5s ease-in-out infinite alternate;
}
@keyframes nameGlow {
  from {
    text-shadow: 
      0 0 6px #fff,
      0 0 12px #fde047,
      0 0 22px #facc15,
      0 0 34px #eab308;
  }
  to {
    text-shadow: 
      0 0 10px #fff,
      0 0 20px #fde047,
      0 0 35px #facc15,
      0 0 50px #ca8a04;
  }
}
#finale {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;   /* semua isi #finale rata tengah */
  justify-content: flex-start;
}
#typeText, 
#nameText {
  text-align: center;
  width: 100%;
}
/* Ornaments = background di dalam finale */
#ornaments {
  position: absolute;
  inset: 0;
  z-index: 0;    /* layer paling bawah */
  pointer-events: none;
}

/* Teks dan footer = di atas ornaments */
#typeText,
#nameText,
#finale footer {
  position: relative;
  z-index: 2;
}

/* Video = di tengah (antara ornaments & teks) */
.finale-img {
  position: relative;
  z-index: 1;
}
/* Hidden message di akhir */
#hiddenMsg{
  margin:14px auto 0;
  max-width:680px;
  font-size:clamp(14px,4vw,18px);
  font-style:italic;
  color:#eaf6ff;
  opacity:0;
  transition: opacity .8s ease;
}
#hiddenMsg.show{ opacity:1 }

</style>
</head>
<body class="center-teaser">
  <div class="stars"></div>

  <h1 id="headline">Psst‚Ä¶ ada sesuatu buat kamu üòâ</h1>
  <p id="message">Tap tombol di bawah untuk mulai</p>

  <button id="surpriseBtn" class="btn">‚ú® Buka</button>

  <div class="gallery" id="gallery">
    <img id="img1" alt="Foto 1" loading="lazy">
    <img id="img2" alt="Foto 2" loading="lazy">
  </div>

  <!-- Finale (slide 3) -->
  <div id="finale" style="display:none; margin:18px 0 8px;">
    <div id="ornaments" aria-hidden="true"></div>
    <div id="typeText" class="type"></div>
    <div id="nameText" class="name"></div>
    <footer>Dari aku, untukmu üíô</footer>
    <video id="finaleVideo" class="finale-img" src="./videos/spesial.mp4" controls muted playsinline></video>
    <p id="hiddenMsg" aria-hidden="true"></p>
  </div>

  <div class="pill" id="musicPill" hidden>
    <span id="musicText">üé∂ Musik diputar‚Ä¶</span>
    <button id="musicToggle" class="pause">‚è∏Ô∏è Pause</button>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <script>
    /* ====== SET INI AJA ====== */
    const PERSON_NAME = "Fathir Risky Ramadhan";  // GANTI
    const SONG_SRC = "lagu.mp3";                   // GANTI
    const EVENT_DATE = "20 September 2025";        // tampil di SLIDE 3
   const ENDING_SONG_SRC = "ending.mp3";  // musik penutup
   const slides = [
      { text:
`Hai, terima kasih yaa untuk beberapa bulan ini. Jujur aku senang banget bisa kenal kamu. Sama kamu, aku merasakan hal-hal baru sampai bikin aku mikir, 'ada ya cowok kayak gini.' meski pada akhirnya, berujung kecewa juga.

Maaf, aku jadi jarang ada waktu buat kamu dan rasanya kayak aku aja yang harus terus ngabarin, sementara dari kamu sendiri nggak selalu begitu. Apalagi aku memang nggak terbiasa cerita banyak hal ke orang lain. Kamu juga tahu kan kalau aku lagi sibuk? Selain sibuk, aku juga lagi stres mikirin gimana untuk kedepannya.

Aku sama sekali gak pernah ada niatan untuk ninggalin kamu. Tapi karena teringat kejadianmu sama cewek lain di ML, ditambah kondisi kita yang kayak gini, aku jadi kepikiran: mungkin lebih baik menjauh daripada nanti aku sakit hati lagi karena ada orang lain.

Rasa kesepianmu juga bikin aku mikir: apa sebenarnya kamu cuma butuh seseorang buat nemenin, buat nyayangin kamu, bukan karena benar-benar pengen sama aku? Karena pada akhirnya, rasa sepi itu bisa kamu isi sama orang lain juga.`,
        photos:["./images/foto1.jpg","./images/foto2.jpg"], theme:"slide1" },
      { text:"Ciee sekarang sudah 17 tahun. Semoga semakin dewasa yaa, lucunya jangan hilang, tetap ceria jangan nangis mulu, bikin capek. Semangat!!! Semoga harimu selalu indah ‚ù§Ô∏è ", photos:["./images/foto3.jpg","./images/foto4.jpg"], theme:"slide2" },
      { text:"", photos:[], theme:"slide3", finale:true }
    ];

    /* Tema aurora + palet confetti */
    const THEMES = {
      teaser:{ base:"#050517",
        c1:"rgba(129,140,248,0.30)", c2:"rgba(59,130,246,0.28)", c3:"rgba(67,56,202,0.28)", c4:"rgba(99,102,241,0.26)",
        confetti:["#818cf8","#a5b4fc","#c7d2fe","#e0e7ff"] },
      slide1:{ base:"#081222",
        c1:"rgba(30,64,175,0.30)", c2:"rgba(59,130,246,0.30)", c3:"rgba(34,211,238,0.26)", c4:"rgba(20,184,166,0.24)",
        confetti:["#38bdf8","#22d3ee","#60a5fa","#2dd4bf"] },
      slide2:{ base:"#190b24",
        c1:"rgba(109,40,217,0.30)", c2:"rgba(168,85,247,0.30)", c3:"rgba(236,72,153,0.26)", c4:"rgba(249,168,212,0.24)",
        confetti:["#c084fc","#f472b6","#f9a8d4","#fbcfe8"] },
      slide3:{ base:"#021719",
        c1:"rgba(15,118,110,0.30)", c2:"rgba(20,184,166,0.26)", c3:"rgba(34,211,238,0.26)", c4:"rgba(250,204,21,0.22)",
        confetti:["#2dd4bf","#22d3ee","#67e8f9","#fde047"] }
    };

    let currentConfettiColors=THEMES.teaser.confetti;
    let idx=0, afterpartyStarted=false, emojiInterval=null;
    const btn=document.getElementById("surpriseBtn");
    const headline=document.getElementById("headline");
    const msg=document.getElementById("message");
    const gallery=document.getElementById("gallery");
    const img1=document.getElementById("img1");
    const img2=document.getElementById("img2");
    const finale=document.getElementById("finale");
    const typeText=document.getElementById("typeText");
    const nameText=document.getElementById("nameText");
    const finaleVideo=document.getElementById("finaleVideo");
    const musicPill=document.getElementById("musicPill");
    const hiddenMsg = document.getElementById("hiddenMsg");
    const musicText=document.getElementById("musicText");
    const musicToggle=document.getElementById("musicToggle");
    let audio,isPlaying=false;
    let endingAudio;

    function applyTheme(theme){
      document.body.style.setProperty('--base',theme.base);
      document.body.style.setProperty('--c1',theme.c1);
      document.body.style.setProperty('--c2',theme.c2);
      document.body.style.setProperty('--c3',theme.c3);
      document.body.style.setProperty('--c4',theme.c4);
      currentConfettiColors = theme.confetti;
    }
    applyTheme(THEMES.teaser);

    /* Confetti */
    function burstVariant(){
      const colors=currentConfettiColors;
      const base={gravity:1.0,decay:0.9,ticks:200,scalar:1.3,startVelocity:80};
      confetti({...base,particleCount:200,spread:80,angle:60,origin:{x:0,y:1},colors});
      confetti({...base,particleCount:200,spread:80,angle:120,origin:{x:1,y:1},colors});
      confetti({...base,particleCount:280,spread:100,angle:90,origin:{x:.5,y:1},colors});
      confetti({...base,particleCount:220,spread:120,angle:90,startVelocity:90,origin:{x:.5,y:.95},colors});
      const end=Date.now()+1200;
      const rain=setInterval(()=>{
        confetti({particleCount:24,startVelocity:58,spread:70,origin:{x:Math.random(),y:-0.1},colors,gravity:1.2,scalar:1.1,ticks:160});
        if(Date.now()>end) clearInterval(rain);
      },120);
    }

    function spawnSparkleAround(el){
      if(!el) return;
      const rect=el.getBoundingClientRect();
      const x = rect.left + rect.width * (0.1 + Math.random()*0.8);
      const y = rect.top  + rect.height * (0.1 + Math.random()*0.8);
      const s = document.createElement("div");
      s.className="sparkle";
      s.textContent = ["‚ú®","‚ú¶","‚úß","‚ú∫","‚ùáÔ∏é"][Math.floor(Math.random()*5)];
      s.style.left = x + "px"; s.style.top  = y + "px";
      s.style.fontSize = (14 + Math.random()*8) + "px";
      document.body.appendChild(s);
      setTimeout(()=>s.remove(),1400);
    }

    function startEmojiRise(){
      if(emojiInterval) return;
      emojiInterval = setInterval(()=>{
        const e = document.createElement("div");
        e.className="rise";
        e.textContent = ["üíô","üéà","‚≠ê","‚ú®","ü•≥","üéà"][Math.floor(Math.random()*6)];
        e.style.left = (5 + Math.random()*90) + "vw";
        e.style.animationDuration = (5 + Math.random()*4) + "s";
        document.body.appendChild(e);
        setTimeout(()=>e.remove(), 10000);
      }, 260);
    }

    async function typeWriter(str, el, speed=170){
      el.classList.remove('done'); el.textContent="";
      for (let i=0;i<str.length;i++){
        el.textContent += str[i];
        if(Math.random()<0.45) spawnSparkleAround(el);
        await new Promise(r=>setTimeout(r, speed));
      }
      el.classList.add('done');
    }

    function showOrnamentsPersistent(){
      const wrap = document.getElementById('ornaments');
      const symbols = ["‚ú¶","‚úß","‚ùáÔ∏é","‚ùà","‚ú∫","‚ú≥Ô∏é"];
      for(let i=0;i<22;i++){
        const d = document.createElement('div');
        d.className = 'orn';
        d.textContent = symbols[i % symbols.length];
        d.style.left = (25 + Math.random()*50) + '%';
        d.style.top  = (28 + Math.random()*32) + '%';
        d.style.opacity = (0.14 + Math.random()*0.22).toFixed(2);
        d.style.setProperty('--dx', (Math.random()*10-5) + 'px');
        d.style.setProperty('--dy', (Math.random()*10-5) + 'px');
        d.style.setProperty('--dur', (10 + Math.random()*14) + 's');
        wrap.appendChild(d);
      }
    }

    function showSlide(i){
      document.body.classList.remove('center-teaser');
      const s=slides[i];
      applyTheme(THEMES[s.theme]);
      headline.textContent = "";
      msg.textContent = s.text || "";
      msg.classList.add('story');          // <<< teks rapi khusus slide
      finale.style.display="none";
      gallery.hidden = false;

      img1.classList.remove("show"); img2.classList.remove("show");
      setTimeout(()=>{ img1.src=s.photos[0]; img2.src=s.photos[1]; img1.classList.add("show"); img2.classList.add("show"); },20);

      btn.textContent = "‚ú® Lanjut";
      btn.disabled = false;
      btn.classList.remove('bottom-fixed');
      btn.classList.add('space-bottom');   // spasi aman dari musik
      gallery.insertAdjacentElement('afterend', btn);
      btn.style.display = "inline-block";
      window.scrollTo({top:0, behavior:'smooth'});
    }

    async function showFinale(){
      applyTheme(THEMES.slide3);
      gallery.hidden = true;
      finale.style.display = "block";
      headline.textContent = EVENT_DATE;
      msg.textContent = "";
      msg.classList.remove('story');       // <<< kembali ke mode teaser/finale
      typeText.textContent = "";
      nameText.textContent = "";
      finaleVideo.classList.remove("show");

      showOrnamentsPersistent();

      btn.style.display = "none";
      btn.classList.remove('space-bottom');

      await typeWriter("HAPPY BIRTHDAY", typeText, 180);
typeText.classList.add('glow');   // << efek glowing
typeText.classList.add('hb-glow');   // glowing biru khusus HB

await new Promise(r=>setTimeout(r, 450));

// biarin nama normal (capital cuma awal kata)
await typeWriter(PERSON_NAME, nameText, 160);
nameText.classList.add('name-glow'); // glowing kuning khusus Nama

      const sparkleTimer = setInterval(()=>{ spawnSparkleAround(typeText); spawnSparkleAround(nameText); }, 120);
      setTimeout(()=>clearInterval(sparkleTimer), 1800);
      startEmojiRise();

      setTimeout(()=>finaleVideo.classList.add("show"), 300);

      btn.textContent = "‚ú® Selesai";
      btn.disabled = false;
      btn.classList.add('bottom-fixed');
      document.body.appendChild(btn);
      btn.style.display = "inline-block";
      window.scrollTo({top:0, behavior:'smooth'});
    }

    /* Musik */
    function ensureAudio(){
      if(!audio){audio=new Audio(SONG_SRC);audio.loop=true;}
      if(!isPlaying){
        audio.play().then(()=>{
          isPlaying=true; musicPill.hidden=false;
          musicText.textContent="üé∂ Musik diputar‚Ä¶";
          musicToggle.textContent="‚è∏Ô∏è Pause"; musicToggle.classList.add("pause");
        }).catch(()=>{
          musicPill.hidden=false;
          musicText.textContent="üîà Ketuk untuk mulai musik";
          musicToggle.textContent="‚ñ∂Ô∏è Play"; musicToggle.classList.remove("pause");
        });
      }
    }
    function toggleAudio(){
      if(!audio){ensureAudio();return;}
      if(isPlaying){audio.pause();isPlaying=false;musicText.textContent="üîá Musik dijeda";musicToggle.textContent="‚ñ∂Ô∏è Play";musicToggle.classList.remove("pause");}
      else{audio.play();isPlaying=true;musicText.textContent="üé∂ Musik diputar‚Ä¶";musicToggle.textContent="‚è∏Ô∏è Pause";musicToggle.classList.add("pause");}
    }
    musicToggle.addEventListener("click",toggleAudio);
    window.addEventListener('click',ensureAudio,{once:true});
    
function fadeAudioOut(duration=1500){
  if(!audio || !isPlaying){
    return Promise.resolve();
  }
  return new Promise(resolve=>{
    const steps = 30;
    const stepTime = duration / steps;
    const startVol = (typeof audio.volume === "number" ? audio.volume : 1);
    let i = 0;
    const t = setInterval(()=>{
      i++;
      audio.volume = Math.max(0, startVol * (1 - i/steps));
      if(i >= steps){
        clearInterval(t);
        audio.pause();
        isPlaying = false;
        audio.currentTime = 0;
        audio.volume = startVol; // reset buat next play
        musicText.textContent = "üîá Musik selesai";
        musicToggle.textContent = "‚ñ∂Ô∏è Play";
        musicToggle.classList.remove("pause");
        resolve();
      }
    }, stepTime);
  });
}

function playEndingAudio(){
  if(!endingAudio){
    endingAudio = new Audio(ENDING_SONG_SRC);
  }
  endingAudio.currentTime = 0;
  endingAudio.volume = 0.9;
  endingAudio.play().catch(err=>{
    console.warn("Ending music blocked:", err);
  });
}

let endingShown = false; // guard biar gak dobel

finaleVideo.addEventListener('ended', async ()=>{
  if(endingShown) return;
  endingShown = true;
  await fadeAudioOut(1600);
  playEndingAudio(); // musik penutup
  hiddenMsg.textContent = "Aku selalu doakan yang terbaik buat kamu üí´";
  hiddenMsg.classList.add("show");
  btn.textContent = "Putar lagi üéµ";
  btn.disabled = false;
  idx = 4; // state replay
});

    /* Afterparty */
    function startAfterparty(){
  if(afterpartyStarted) return; 
  afterpartyStarted = true;

  setInterval(()=>{
    const e = document.createElement("div");
    e.className = "rise"; 
    e.textContent = ["üíô","üéà","ü•≥","‚ú®","‚≠ê","üéÇ"][Math.floor(Math.random()*6)];
    e.style.left = (5 + Math.random()*90) + "vw";
    e.style.fontSize = (24 + Math.random()*20) + "px";
    e.style.animationDuration = (5 + Math.random()*6) + "s";
    document.body.appendChild(e);

    setTimeout(()=>e.remove(), 12000); // hapus biar gak numpuk
  }, 2500); // tiap 2.5 detik keluar emoji baru
}

    /* Klik tombol ‚Äì flow asli */
    btn.addEventListener("click", async ()=>{
      burstVariant();
      if(idx === 0){ showSlide(0); idx = 1; return; }
      if(idx === 1){ showSlide(1); idx = 2; return; }
      if(idx === 2){ await showFinale(); /* no afterparty (confetti dimatikan) */ idx = 3; return; }
      if(idx === 3){
  // Tekan "‚ú® Selesai" ‚Üí fade out musik utama + play musik penutup + tampilkan hidden message
  btn.disabled = true;
  (async () => {
    await fadeAudioOut(1600);
    playEndingAudio(); // <<< musik penutup mulai
    hiddenMsg.innerHTML = "Semoga segala hal baik selalu sampai ke kamu üí´ <br>Aku nggak janji apa-apa, tapi aku beneran pengen kamu bahagia ü´∂";
    hiddenMsg.classList.add("show");
    btn.textContent = "Putar lagi üéµ"; 
    btn.disabled = false;
    idx = 4;
    endingShown = true;
  })();
  return;
}
if(idx >= 4){
  location.reload(); // replay full flow
}
    });
  </script>
</body>
</html>
